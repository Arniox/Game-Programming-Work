#include "ExplosionParticle.h"
#include <random>
#include <time.h>

ExplosionParticle::ExplosionParticle()
:dead(true)
,age(0)
,dy(0)
,dx(0)
,gravity(0)
{
}
ExplosionParticle::~ExplosionParticle()
{
	gravity = 98.1;
}

void 
ExplosionParticle::SetCenter(float x, float y)
{
	//Set up random explosion movement
	srand(time(0));

	dy = (rand() % 200) - 100;
	dx = (rand() % 200) - 100;
	
	m_x = x;
	m_y = y;
}


void 
ExplosionParticle::Process(float deltaTime, int windowWidth, int windowHeight) 
{
	age += deltaTime;
	//Kill if old
	if (age >= 20) {
		dead = true;
	}

	//If bounce from floor
	if (m_x <= windowHeight - 5 || m_x >= 5) {
		dx *= -0.5;
	}
	//If bounce from wall
	if (m_y <= windowHeight - 5 || m_y >= 5) {
		dy *= -0.5;
	}

	//Move
	m_x = m_x + dx + gravity * deltaTime;
	m_y = m_y + dy * deltaTime;
	
}